{% extends 'cv/base.html' %}

{% block content %}
    <div class="text-center mb-4">
        <h2 class="fw-bold text-success"><i class="bi bi-patch-check-fill"></i> Reconocimientos</h2>
        <p class="text-muted">Evidencia documental de mi trayectoria académica y profesional.</p>
    </div>

    {% if certificados %}
    <div class="row">
        <div class="col-12 mb-4">
            <ul class="nav nav-pills nav-fill gap-2 p-2 bg-light rounded-4 shadow-sm" id="pills-tab" role="tablist" style="overflow-x: auto; flex-wrap: nowrap; white-space: nowrap;">
                
                {% for cert in certificados %}
                <li class="nav-item" role="presentation">
                    <button class="nav-link rounded-pill fw-bold border {% if forloop.first %}active{% endif %}" 
                            id="tab-{{ cert.id }}" 
                            data-bs-toggle="pill" 
                            data-bs-target="#content-{{ cert.id }}" 
                            type="button" 
                            role="tab" 
                            aria-selected="{% if forloop.first %}true{% else %}false{% endif %}">
                        <i class="bi bi-award me-2"></i>{{ cert.titulo }}
                    </button>
                </li>
                {% endfor %}

            </ul>
            <div class="text-center mt-2">
                <small class="text-muted fst-italic"><i class="bi bi-arrow-left-right"></i> Desliza o selecciona un certificado para verlo</small>
            </div>
        </div>

        <div class="col-12">
            <div class="tab-content" id="pills-tabContent">
                
                {% for cert in certificados %}
                <div class="tab-pane fade {% if forloop.first %}show active{% endif %}" id="content-{{ cert.id }}" role="tabpanel" tabindex="0">
                    
                    <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
                        <div class="card-header bg-dark text-white p-3 d-flex justify-content-between align-items-center">
                            <div>
                                <h5 class="mb-0 fw-bold">{{ cert.titulo }}</h5>
                                <small class="text-white-50">{{ cert.institucion }} | {{ cert.fecha|date:"M Y" }}</small>
                            </div>
                            {% if cert.archivo %}
                            <a href="{{ cert.archivo.url }}" download class="btn btn-success btn-sm rounded-pill fw-bold">
                                <i class="bi bi-download me-1"></i> Descargar
                            </a>
                            {% endif %}
                        </div>
                        
                        <div class="card-body p-0 bg-secondary position-relative">
                            {% if cert.archivo %}
                                <div style="height: 600px; width: 100%;">
                                    <embed src="{{ cert.archivo.url }}" type="application/pdf" width="100%" height="100%" />
                                </div>
                            {% else %}
                                <div class="text-center py-5 text-white">
                                    <i class="bi bi-file-earmark-x fs-1"></i>
                                    <p>No hay archivo adjunto para mostrar.</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>

                </div>
                {% endfor %}

            </div>
        </div>
    </div>

    {% else %}
    <div class="text-center py-5 opacity-50">
        <i class="bi bi-folder-x fs-1"></i>
        <p>Aún no hay documentos disponibles.</p>
    </div>
    {% endif %}

{% endblock %}